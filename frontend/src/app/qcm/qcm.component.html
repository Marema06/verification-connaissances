<div class="p-4 space-y-6">
  <h2 class="text-2xl font-bold">QCM de {{ author }}</h2>

  <div *ngIf="qcmList.length === 0">
    Aucun QCM trouv√© pour {{ author }}.
  </div>

  <div *ngFor="let qcm of qcmList; let i = index" class="bg-white shadow-lg rounded-2xl p-4 space-y-4">
    <h3 class="text-xl font-semibold">QCM {{ i + 1 }}</h3>

    <form *ngIf="qcm.questions && qcm.questions.length > 0">
      <div *ngFor="let question of qcm.questions; let j = index" class="mb-4">
        <p class="font-medium">{{ question.question }}</p>
        <div class="space-y-2 ml-4">
          <label *ngFor="let choice of question.choices; let k = index" class="flex items-center space-x-2">
            <input
              type="radio"
              [name]="'qcm' + i + '_q' + j"
              [value]="k"
              [(ngModel)]="userAnswers[i][j]"
              [disabled]="submitted"
              class="accent-blue-500"
            />
            <span>{{ choice }}</span>
          </label>
        </div>
      </div>
    </form>

    <div *ngIf="submitted" class="text-green-700 font-bold">
      Score : {{ getScore(i) }} / {{ qcm.questions.length }}
    </div>
  </div>

  <button
    (click)="onSubmit()"
    class="bg-blue-600 text-white px-4 py-2 rounded-xl shadow hover:bg-blue-700"
    [disabled]="submitted || qcmList.length === 0"
  >
    Soumettre
  </button>
</div>
