<div *ngIf="!isLoading; else loading">
  <h2>QCM</h2>
  <form *ngIf="qcmData.length; else noQcm" (ngSubmit)="submit()">
    <div *ngFor="let q of qcmData; let i = index" class="q-block">
      <p><strong>{{ i+1 }}. {{ q.question }}</strong></p>
      <div *ngFor="let c of q.choices">
        <label>
          <input
            type="radio"
            name="q{{ i }}"
            [value]="c.charAt(0)"
            [(ngModel)]="answers[i]"
            required
          />
          {{ c }}
        </label>
      </div>
    </div>
    <button type="submit">Envoyer mes réponses</button>
  </form>
  <div *ngIf="feedback" class="feedback">{{ feedback }}</div>
</div>

<ng-template #loading>
  <p>Chargement…</p>
</ng-template>
<ng-template #noQcm>
  <p>Aucun QCM disponible.</p>
</ng-template>
